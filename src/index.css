/*
 * Archivo de estilos globales (index.css)
 */
:root {
  --color-primario: #007bff;
  --color-primario-hover: #0056b3;
  --color-fondo: #f4f7f6;
  --color-superficie: #ffffff;
  --color-texto: #333;
  --color-texto-secundario: #555;
  --color-borde: #ddd;
  --color-error: #d9534f;
  --color-exito: #5cb85c;
  --color-warning: #f0ad4e; /* Añadido para los badges */
  --color-notificacion: #f0f8ff;
  --sombra: 0 2px 4px rgba(0, 0, 0, 0.05);
  --radio-borde: 5px; /* AntD usa 6px o 8px, pero lo mantenemos por si acaso */
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--color-fondo);
  color: var(--color-texto);
}

* {
  box-sizing: border-box;
}

/* --- Estilos para Layout de AntD --- */
.app-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  /* Color oscuro industrial */
  background-color: #001529 !important; 
  box-shadow: var(--sombra);
  padding: 0 24px !important;
  /* Hago que el header sea fijo */
  position: sticky;
  top: 0;
  z-index: 10;
  width: 100%;
}

.app-content {
  padding: 24px;
  margin: 0;
  background-color: var(--color-fondo);
}

.app-sider {
  background: var(--color-superficie) !important; /* Sider blanco */
  padding: 24px;
  border-left: 1px solid var(--color-borde);
  /* overflow-y: auto; */
  
  /* 1. Convertimos el Sider en un contenedor flex (columna) */
  display: flex;
  flex-direction: column;
}

/* ---Solo hacemos el Sider pegajoso en pantallas grandes --- */
@media (min-width: 992px) {
  .app-sider {
    /* Altura = 100% de la ventana menos 64px del header */
    height: calc(100vh - 64px); 
    /* Hago que el sider sea fijo */
    position: sticky;
    top: 64px; /* Pegado debajo del header */
  }
}


.sider-section {
  margin-bottom: 2rem;
  
  /* 3. Hacemos que la sección de notificaciones sea flexible */
  flex: 1 1 auto;
  min-height: 0; /* Clave para que el overflow-y funcione en un hijo de flex */
  display: flex;
  flex-direction: column;
}

/* 4. Esta es la nueva clase que añadimos en DashboardPage.js */
.notification-list-wrapper {
  flex-grow: 1; /* Hace que este div ocupe todo el espacio sobrante */
  overflow-y: auto;
  min-height: 100px; /* Le damos una altura mínima por si acaso */
}



/* Encabezado del contenido (Título + Botón) */
.content-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--color-borde);
  
  flex-wrap: wrap; /* Permite que los elementos bajen si no caben */
  gap: 1rem; /* Espacio entre el título y el botón si bajan */
}

/* Grilla para las tarjetas de procesos */
.process-list-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.process-card .ant-tag {
  /* Posiciona el tag en la esquina superior derecha */
  position: absolute;
  top: 24px;
  right: 24px;
  font-weight: 600;
  font-size: 0.8em;
}

/* --- Estilos de Notificaciones (AntD List) --- */
.notification-item {
  padding: 8px 0 !important; /* Sobreescribo padding de AntD */
  border-bottom: 1px solid #f0f0f0 !important;
}
.notification-item:last-child {
  border-bottom: none !important;
}

/* --- Estilos para Link (Reset) --- */
.link-style-reset {
  text-decoration: none;
  color: inherit;
}

/* --- Estilos para Página de Detalle --- */
.app-content-detail {
  padding: 24px;
  max-width: 1400px;
  margin: 0 auto;
  width: 100%;
}

/* Botones de Aprobar/Rechazar */
.supervisor-actions-antd .ant-btn {
  margin-right: 1rem;
}
/* Clases para botones de AntD */
.ant-btn.button-success {
  background-color: var(--color-exito);
  border-color: var(--color-exito);
  color: #fff;
}
.ant-btn.button-success:hover {
  background-color: #449d44;
  border-color: #449d44;
  color: #fff;
}


/* Avatares de severidad en la lista de incidencias */
.severity-badge-avatar {
  font-weight: 700 !important;
  color: #fff !important;
}
.severity-baja { background-color: var(--color-exito) !important; }
.severity-media { background-color: var(--color-warning) !important; }
.severity-critica { background-color: var(--color-error) !important; }

/* Lista de evidencia en la lista de incidencias */
.evidence-list {
  margin-top: 8px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
}
.evidence-list-item {
  margin-right: 8px;
}
.evidence-list-item .ant-tag {
  margin: 0;
}
.evidence-list-item a {
  text-decoration: none;
}


/* --- Estilos para Botón de Volver --- */
.back-button-ant {
  font-size: 1.5rem; 
  font-weight: 600;
  color: #fff !important; /* Blanco en el header oscuro */
  text-decoration: none;
  margin-right: 1rem;
  transition: color 0.2s;
  padding: 0 0.5rem;
  line-height: 1;
}
.back-button-ant:hover {
  color: var(--color-primario) !important;
}

/* --- Estilos para Links del Header --- */
.header-nav-link {
  margin-right: 1.5rem;
  font-weight: 600;
  color: #fff !important; 
  text-decoration: none;
  transition: color 0.2s;
}
.header-nav-link:hover {
  color: var(--color-primario) !important;
}
.header-nav-user {
  margin-right: 1.5rem;
  color: rgba(255, 255, 255, 0.85);
  font-weight: 500;
}

/* --- Estilos para la Página de Reportes --- */
.reports-page-main {
  max-width: 1200px;
  margin: 0 auto;
  width: 100%;
}
.stats-grid {
  margin-top: 1rem;
}
.stat-card .ant-card-body {
  padding: 20px;
  text-align: center;
}
.stat-card h3 {
  font-size: 2.5rem;
  color: var(--color-primario);
  margin: 0;
}
.stat-card p {
  font-size: 1rem;
  color: var(--color-texto-secundario);
  margin: 0.25rem 0 0 0;
  font-weight: 600;
}
/* Colores de las tarjetas de stats */
.stat-card-ok h3 {
  color: var(--color-exito);
}
.stat-card-warn h3 {
  color: var(--color-warning);
}
.stat-card-danger h3 {
  color: var(--color-error);
}


/* Columnas de reportes */
.reports-columns {
  margin-top: 2.5rem;
}
.report-card .ant-card-head {
  border-bottom: 1px solid var(--color-borde) !important;
}
.report-list-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0 !important;
}
.report-list-item .ant-tag {
  font-weight: 600;
  margin-right: auto;
}
.report-list-item strong {
  margin-left: 1rem; 
}


/* --- Estilos para la Lista de Conversaciones (Sidebar) --- */
.conversation-sidebar {
  display: flex;
  flex-direction: column;
  /* 5. Hacemos que la sección de chat NO se encoja */
  flex-shrink: 0;
}
.conversation-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.conversation-header h3 {
  margin: 0;
  border-bottom: 2px solid var(--color-primario);
  padding-bottom: 0.5rem;
  flex-grow: 1;
}
.new-chat-button {
  background-color: var(--color-primario);
  color: white;
  border: none;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  font-size: 1.5rem;
  line-height: 28px;
  text-align: center;
  cursor: pointer;
  padding: 0;
  margin-left: 1rem;
}

.conversation-list {
  display: flex;
  flex-direction: column;
  margin-top: 1rem;
  gap: 0.5rem;
  max-height: 200px;
  overflow-y: auto;
}
.conversation-item {
  display: block;
  padding: 0.75rem 1rem;
  background-color: var(--color-fondo);
  border-radius: var(--radio-borde);
  text-decoration: none;
  color: var(--color-texto-secundario);
  font-weight: 600;
  transition: background-color 0.2s;
}
.conversation-item:hover {
  background-color: #e9ecef;
  color: var(--color-primario);
}

/* Modal de Lista de Contactos (aún usa <dialog>) */
.contact-list {
  max-height: 300px;
  overflow-y: auto;
}
.contact-item {
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--color-borde);
  cursor: pointer;
  transition: background-color 0.2s;
}
.contact-item:hover {
  background-color: var(--color-notificacion);
}
.contact-item strong {
  display: block;
  font-size: 1rem;
  color: var(--color-texto);
}
.contact-item small {
  color: var(--color-texto-secundario);
}

/* --- Estilos para Páginas de Chat (General y Privado) --- */
.app-content-chat {
  padding: 1.5rem;
  margin: 0;
  height: calc(100vh - 64px); /* 100% de la altura menos el header */
  display: flex;
  flex-direction: column;
  background-color: var(--color-fondo);
}

.chat-card-container {
  flex-grow: 1; /* Ocupa todo el espacio disponible */
  display: flex;
  flex-direction: column;
  overflow: hidden; /* Clave para que el scroll funcione adentro */
}
.chat-card-container .ant-card-body {
  padding: 0 !important;
  height: 100%;
  display: flex;
  flex-direction: column;
}

.chat-messages-list {
  flex-grow: 1;
  overflow-y: auto;
  padding: 16px 24px;
  background-color: #fcfcfc; /* Un fondo ligeramente diferente */
}

.chat-input-container {
  padding: 16px 24px;
  background: var(--color-superficie);
  border-top: 1px solid var(--color-borde);
}

/* Estilo para los items de la lista de mensajes */
.message-item .ant-list-item-meta {
  align-items: center;
}
.message-item .ant-list-item-meta-avatar {
  align-self: flex-start;
  margin-top: 4px;
}
.message-item .ant-list-item-meta-title {
  font-weight: 600;
  font-size: 0.9em;
  color: var(--color-primario);
  margin-bottom: 0px !important;
}
.message-item .ant-list-item-meta-description {
  color: var(--color-texto);
  font-size: 1em;
  white-space: pre-wrap; /* Respeta los saltos de línea */
  word-wrap: break-word;
  background-color: #e9ecef;
  padding: 8px 12px;
  border-radius: 12px;
  display: inline-block;
}

/* Mi propio mensaje */
.message-item.own {
  /* Alinea todo a la derecha */
  direction: rtl; 
}
.message-item.own .ant-list-item-meta {
  direction: ltr; /* Resetea la dirección para el texto */
  text-align: left; /* El texto dentro del globo se alinea a la izq */
}
.message-item.own .ant-list-item-meta-title {
  text-align: right;
  color: #555; /* Un color más sutil para "Tú" */
}
.message-item.own .ant-list-item-meta-avatar {
  margin-left: 16px;
  margin-right: 0;
}
.message-item.own .ant-list-item-meta-description {
  background-color: var(--color-primario);
  color: white;
}


/* --- Estilos para Login y Register con AntD --- */

/* 1. Fondo industrial/corporativo */
.login-page-background {
  width: 100vw; /* Ocupa toda la pantalla */
  min-height: 100vh;
  padding-top: 50px;
  /* Un gradiente sutil, oscuro y profesional */
  background-color: #2b3a4a; 
  background-image: linear-gradient(135deg, #34495e 0%, #2c3e50 74%);
}

/* 2. Animación de entrada para la tarjeta */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.login-card {
  /* Aplicamos la animación */
  animation: fadeInUp 0.5s ease-out;
  border-radius: 8px !important; 
}

/* 3. Ajustes para el formulario de AntD */
.ant-form-item-label > label {
  font-weight: 600 !important;
  color: var(--color-texto-secundario) !important;
}

/* --- Estilos para Notificaciones Leídas  --- */
.notification-item-read .ant-list-item-meta-title,
.notification-item-read .ant-list-item-meta-description {
  color: #999 !important; /* Color más claro para texto leído */
  font-weight: 400 !important; /* Quita el 'strong' */
}

.notification-item-read {
  opacity: 0.7; /* Le da un efecto de "desvanecido" */
}

/* --- Estilos para Indicador "Escribiendo..." --- */
.typing-indicator-container {
  height: 24px; /* Altura fija para que no salte la UI */
  padding: 0 24px;
  background-color: var(--color-superficie);
}

.typing-indicator {
  font-style: italic;
  animation: fadeIn 0.5s;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* --- Estilos para el botón de eliminar notificación --- */
.notification-item .notification-delete-btn {
  /* Oculta el botón por defecto */
  opacity: 0.2;
  transition: opacity 0.2s;
  padding: 0 8px; /* Hace más fácil hacer clic */
}

/* Muestra el botón cuando el mouse está sobre el item */
.notification-item:hover .notification-delete-btn {
  opacity: 1;
}

.notification-delete-btn:hover {
  /* Asegura que tenga un fondo rojo al pasar el mouse */
  background-color: rgba(255, 0, 0, 0.1) !important;
}

@media (max-width: 768px) {
  /* Oculta el texto de "Hola, {nombre}" en el header en móviles */
  .header-user-text {
    display: none;
  }
  
  /* Oculta el título de la página (ej. "| Detalle de Auditoría") en móviles */
  .header-page-title {
    display: none;
  }
  
  /* Ajusta el padding del header en móviles */
  .app-header {
    padding: 0 16px !important;
  }
  
  /* Ajusta el padding del contenido en móviles */
  .app-content, .app-content-detail, .app-content-chat {
    padding: 16px;
  }
}